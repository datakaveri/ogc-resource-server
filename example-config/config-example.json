{
  "version": "1.0",
  "zookeepers": [
    "zookeeper"
  ],
  "clusterId": "ogc-rs-example-cluster",

  "commonConfig": {
    "ogcBasePath": "/",
    "dxCatalogueBasePath": "/iudx/v2/cat",
    "dxAuthBasePath": "/auth/v1",

    "hostName": "https://ogc.example.com/",

    "catServerHost": "controlplane.example.com",
    "catServerPort": 443,
    "catRequestItemsUri": "/iudx/v2/cat/item",

    "databaseHost": "database.example.com",
    "databasePort": 5433,
    "databaseUser": "example_rs_user",
    "databasePassword": "",
    "databaseName": "example_rs",

    "jwtIgnoreExpiry": false,
    "poolSize": 10
  },

  "s3BucketsConfig": {
    "default": {
      "bucket": "ogc-rs-bucket",
      "endpoint": "https://s3.example.com",
      "region": "ap-south-1",
      "accessKey": "",
      "secretKey": "",
      "pathBasedAccess": true,
      "readAccess": "PRIVATE"
    }
  },

  "host": "ogc-s3.example.com",

  "modules": [

    {
      "id": "ogc.rs.apiserver.ApiServerVerticle",
      "isWorkerVerticle": false,
      "ssl": true,
      "keystore": "secrets/keystore.jks",
      "keystorePassword": "password",
      "httpPort": 8080,
      "verticleInstances": 2,

      "catServerPort": 443,

      "geomSpecificMaxLimits": {
        "MULTILINESTRING": 100,
        "MULTIPOINT": 10000,
        "LINESTRING": 100,
        "POINT": 10000,
        "MULTIPOLYGON": 10000,
        "GEOMETRY": 120,
        "POLYGON": 10
      },

      "s3Bucket": "ogc-rs-bucket",
      "s3Endpoint": "https://s3.example.com",
      "s3Region": "ap-south-1",
      "s3AccessKey": "",
      "s3SecretKey": "",
      "s3PathBasedAccess": true,

      "authServerHost": "auth.example.com",
      "audience": "ogc.example.com",
      "issuer": "controlplane.example.com",

      "jwksRefreshIntervalMs": 21600000,
      "issuers": {
        "jwtIgnoreExpiry": false,
        "leeway": 30,
        "jwksRefreshIntervalMs": 21600000,

        "controlplane.example.com": {
          "type": "remote",
          "audience": [],
          "jwksUrl": "https://controlplane.example.com/iudx/v2/auth/jwks"
        },

        "https://keycloak.example.com/auth/realms/example-realm": {
          "type": "remote",
          "jwksUrl": "https://keycloak.example.com/auth/realms/example-realm/protocol/openid-connect/certs",
          "audience": []
        }
      },

      "controlPanelPort": 443,
      "controlPanelHost": "controlplane.example.com",
      "controlPanelSearchPath": "/iudx/acl/apd/v2/access_request/has_access"
    },

    {
      "id": "ogc.rs.metering.MeteringVerticle",
      "verticleInstances": 1,

      "meteringDatabaseHost": "database.example.com",
      "meteringDatabasePort": 5432,
      "meteringDatabaseUser": "example_metering_user",
      "meteringDatabasePassword": "",
      "meteringDatabaseName": "example_metering",
      "poolSize": 5
    },

    {
      "id": "ogc.rs.databroker.DataBrokerVerticle",
      "verticleInstances": 1,

      "dataBrokerIP": "rabbitmq.example.com",
      "dataBrokerPort": 24568,
      "dataBrokerManagementPort": 28042,
      "dataBrokerUserName": "admin",
      "dataBrokerPassword": "",
      "connectionTimeout": 6000,
      "requestedHeartbeat": 60,
      "handshakeTimeout": 6000,
      "requestedChannelMax": 5,
      "networkRecoveryInterval": 500,
      "automaticRecoveryEnabled": true,

      "prodVhost": "OGC-RS",
      "internalVhost": "OGC-RS-INTERNAL",
      "externalVhost": "OGC-RS-EXTERNAL"
    },

    {
      "id": "ogc.rs.processes.ProcessVerticle",
      "poolSize": 2,
      "verticleInstances": 1
    },

    {
      "id": "ogc.rs.database.DatabaseVerticle",
      "verticleInstances": 1
    },

    {
      "id": "ogc.rs.catalogue.CatalogueVerticle",
      "verticleInstances": 1
    },

    {
      "id": "ogc.rs.jobs.JobsVerticle",
      "verticleInstances": 1
    }
  ]
}
